!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.Viva=e()}}(function(){return function e(n,t,r){function o(a,s){if(!t[a]){if(!n[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var c=t[a]={exports:{}};n[a][0].call(c.exports,function(e){var t=n[a][1][e];return o(t?t:e)},c,c.exports,e,n,t,r)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n){var t=e("ngraph.random"),r={lazyExtend:function(){return e("ngraph.merge").apply(this,arguments)},randomIterator:function(){return t.randomIterator.apply(t,arguments)},random:function(){return t.random.apply(t,arguments)},events:e("ngraph.events")};r.Graph={version:e("./version.js"),graph:e("ngraph.graph"),serializer:function(){return{loadFromJSON:e("ngraph.fromjson"),storeToJSON:e("ngraph.tojson")}},centrality:e("./Algorithms/centrality.js"),operations:e("./Algorithms/operations.js"),geom:function(){return{intersect:e("gintersect"),intersectRect:e("./Utils/intersectRect.js")}},webgl:e("./WebGL/webgl.js"),webglInputEvents:e("./WebGL/webglInputEvents.js"),generator:function(){return e("ngraph.generators")},Input:{domInputManager:e("./Input/domInputManager.js"),webglInputManager:e("./Input/webglInputManager.js")},Utils:{dragndrop:e("./Input/dragndrop.js"),findElementPosition:e("./Utils/findElementPosition.js"),timer:e("./Utils/timer.js"),getDimension:e("./Utils/getDimensions.js"),events:e("./Utils/backwardCompatibleEvents.js")},Layout:{forceDirected:function(n,t){var r=e("ngraph.forcelayout");return r(n,r.simulator(t))},constant:e("./Layout/constant.js")},View:{Texture:e("./WebGL/texture.js"),webglAtlas:e("./WebGL/webglAtlas.js"),webglImageNodeProgram:e("./WebGL/webglImageNodeProgram.js"),webglLinkProgram:e("./WebGL/webglLinkProgram.js"),webglNodeProgram:e("./WebGL/webglNodeProgram.js"),webglLine:e("./WebGL/webglLine.js"),webglSquare:e("./WebGL/webglSquare.js"),webglImage:e("./WebGL/webglImage.js"),webglGraphics:e("./View/webglGraphics.js"),_webglUtil:{parseColor:e("./WebGL/parseColor.js")},svgGraphics:e("./View/svgGraphics.js"),renderer:e("./View/renderer.js"),cssGraphics:function(){throw new Error("cssGraphics is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},svgNodeFactory:function(){throw new Error("svgNodeFactory is deprecated. Please use older version of vivagraph (< 0.7) if you need it")},community:function(){throw new Error("community is deprecated. Please use vivagraph < 0.7 if you need it, or `https://github.com/anvaka/ngraph.slpa` module")}},Rect:e("./Utils/rect.js"),svg:e("simplesvg"),BrowserInfo:e("./Utils/browserInfo.js")},n.exports=r},{"./Algorithms/centrality.js":33,"./Algorithms/operations.js":34,"./Input/domInputManager.js":35,"./Input/dragndrop.js":36,"./Input/webglInputManager.js":37,"./Layout/constant.js":38,"./Utils/backwardCompatibleEvents.js":39,"./Utils/browserInfo.js":40,"./Utils/findElementPosition.js":42,"./Utils/getDimensions.js":43,"./Utils/intersectRect.js":44,"./Utils/rect.js":46,"./Utils/timer.js":47,"./View/renderer.js":49,"./View/svgGraphics.js":50,"./View/webglGraphics.js":51,"./WebGL/parseColor.js":52,"./WebGL/texture.js":53,"./WebGL/webgl.js":54,"./WebGL/webglAtlas.js":55,"./WebGL/webglImage.js":56,"./WebGL/webglImageNodeProgram.js":57,"./WebGL/webglInputEvents.js":58,"./WebGL/webglLine.js":59,"./WebGL/webglLinkProgram.js":60,"./WebGL/webglNodeProgram.js":61,"./WebGL/webglSquare.js":62,"./version.js":63,gintersect:2,"ngraph.events":6,"ngraph.forcelayout":7,"ngraph.fromjson":22,"ngraph.generators":23,"ngraph.graph":24,"ngraph.merge":25,"ngraph.random":26,"ngraph.tojson":27,simplesvg:28}],2:[function(e,n){function t(e,n,t,r,o,i,a,s){var u,f,c,d,l,p,v,h,g,m,y,x,w,b={x:0,y:0};return u=r-n,c=e-t,l=t*n-e*r,g=u*o+c*i+l,m=u*a+c*s+l,0!==g&&0!==m&&g>=0==m>=4?null:(f=s-i,d=o-a,p=a*i-o*s,v=f*e+d*n+p,h=f*t+d*r+p,0!==v&&0!==h&&v>=0==h>=0?null:(y=u*d-f*c,0===y?null:(x=0>y?-y/2:y/2,x=0,w=c*p-d*l,b.x=(0>w?w-x:w+x)/y,w=f*l-u*p,b.y=(0>w?w-x:w+x)/y,b)))}n.exports=t},{}],3:[function(e,n){n.exports.degree=e("./src/degree.js"),n.exports.betweenness=e("./src/betweenness.js")},{"./src/betweenness.js":4,"./src/degree.js":5}],4:[function(e,n){function t(e,n){function t(e){h[e]/=2}function r(e){h[e.id]=0}function o(e){u=e.id,s(u),i()}function i(){for(e.forEachNode(a);c.length;){for(var n=c.pop(),t=(1+v[n])/p[n],r=d[n],o=0;o<r.length;++o){var i=r[o];v[i]+=p[i]*t}n!==u&&(h[n]+=v[n])}}function a(e){v[e.id]=0}function s(t){function r(e){i(e.id)}function o(e){var n=e.id;d[n]=[],l[n]=-1,p[n]=0}function i(e){-1===l[e]&&(l[e]=l[a]+1,f.push(e)),l[e]===l[a]+1&&(p[e]+=p[a],d[e].push(a))}for(e.forEachNode(o),l[t]=0,p[t]=1,f.push(t);f.length;){{var a=f.shift();Object.create(null)}c.push(a),e.forEachLinkedNode(a,r,n)}}var u,f=[],c=[],d=Object.create(null),l=Object.create(null),p=Object.create(null),v=Object.create(null),h=Object.create(null);return e.forEachNode(r),e.forEachNode(o),n||Object.keys(h).forEach(t),h}n.exports=t},{}],5:[function(e,n){function t(e,n){function t(n){var t=e.getLinks(n.id);s[n.id]=a(t,n.id)}var a,s=Object.create(null);if(n=(n||"both").toLowerCase(),"both"===n||"inout"===n)a=i;else if("in"===n)a=r;else{if("out"!==n)throw new Error("Expected centrality degree kind is: in, out or both");a=o}return e.forEachNode(t),s}function r(e,n){for(var t=0,r=0;r<e.length;r+=1)t+=e[r].toId===n?1:0;return t}function o(e,n){for(var t=0,r=0;r<e.length;r+=1)t+=e[r].fromId===n?1:0;return t}function i(e){return e.length}n.exports=t},{}],6:[function(e,n){function t(e){var n=Object.create(null);return{on:function(t,r,o){if("function"!=typeof r)throw new Error("callback is expected to be a function");var i=n[t];return i||(i=n[t]=[]),i.push({callback:r,ctx:o}),e},off:function(t,r){var o="undefined"==typeof t;if(o)return n=Object.create(null),e;if(n[t]){var i="function"!=typeof r;if(i)delete n[t];else for(var a=n[t],s=0;s<a.length;++s)a[s].callback===r&&a.splice(s,1)}return e},fire:function(t){var r=n[t];if(!r)return e;var o;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<r.length;++i){var a=r[i];a.callback.apply(a.ctx,o)}return e}}}function r(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}n.exports=function(e){r(e);var n=t(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e}},{}],7:[function(e,n){function t(n,t){function i(e,t){var r;if(void 0===t)r="string"==typeof e?e:e.id;else{var o=n.hasLink(e,t);if(!o)return;r=o.id}return b[r]}function a(e){return w[e]}function s(){n.on("changed",u)}function u(e){for(var n=0;n<e.length;++n){var t=e[n];"add"===t.changeType?(t.node&&c(t.node.id),t.link&&l(t.link)):"remove"===t.changeType&&(t.node&&d(t.node),t.link&&p(t.link))}}function f(){n.forEachNode(function(e){c(e.id)}),n.forEachLink(l)}function c(e){var r=w[e];if(!r){var o=n.getNode(e);if(!o)throw new Error("initBody() was called with unknown node id");var i=o.position;if(!i){var a=v(o);i=t.getBestNewBodyPosition(a)}r=t.addBodyAt(i),w[e]=r,h(e),g(o)&&(r.isPinned=!0)}}function d(e){var n=e.id,r=w[n];r&&(w[n]=null,delete w[n],t.removeBody(r))}function l(e){h(e.fromId),h(e.toId);var n=w[e.fromId],r=w[e.toId],o=t.addSpring(n,r,e.length);E(e,o),b[e.id]=o}function p(e){var r=b[e.id];if(r){var o=n.getNode(e.fromId),i=n.getNode(e.toId);o&&h(o.id),i&&h(i.id),delete b[e.id],t.removeSpring(r)}}function v(e){var n=[];if(!e.links)return n;for(var t=Math.min(e.links.length,2),r=0;t>r;++r){var o=e.links[r],i=o.fromId!==e.id?w[o.fromId]:w[o.toId];i&&i.pos&&n.push(i)}return n}function h(e){var n=w[e];n.mass=y(e)}function g(e){return e&&(e.isPinned||e.data&&e.data.isPinned)}function m(e){var n=w[e];return n||(c(e),n=w[e]),n}function y(e){return 1+n.getLinks(e).length/3}if(!n)throw new Error("Graph structure cannot be undefined");var x=e("ngraph.physics.simulator");t=t||x(),o(t,"physicsSimulator").has("step","getBestNewBodyPosition","addBodyAt");var w="function"==typeof Object.create?Object.create(null):{},b={},E=t.settings.springTransform||r;f(),s();var L={step:function(){return t.step()},getNodePosition:function(e){return m(e).pos},setNodePosition:function(e){var n=m(e);n.setPosition.apply(n,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var n=b[e];return n?{from:n.from.pos,to:n.to.pos}:void 0},getGraphRect:function(){return t.getBBox()},pinNode:function(e,n){var t=m(e.id);t.isPinned=!!n},isNodePinned:function(e){return m(e.id).isPinned},dispose:function(){n.off("changed",u)},getBody:a,getSpring:i,simulator:t};return L}function r(){}n.exports=t,n.exports.simulator=e("ngraph.physics.simulator");var o=e("varta")},{"ngraph.physics.simulator":8,varta:21}],8:[function(e,n){function t(n){function t(){var e,n=l.length;if(n)for(v.insertBodies(l);n--;)e=l[n],e.force.reset(),v.updateBodyForce(e),m.update(e);for(n=p.length;n--;)g.update(p[n])}var r=e("./lib/spring"),o=e("ngraph.expose"),i=e("ngraph.merge");n=i(n,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var a=n.createQuadTree||e("ngraph.quadtreebh"),s=n.createBounds||e("./lib/bounds"),u=n.createDragForce||e("./lib/dragForce"),f=n.createSpringForce||e("./lib/springForce"),c=n.integrator||e("./lib/eulerIntegrator"),d=n.createBody||e("./lib/createBody"),l=[],p=[],v=a(n),h=s(l,n),g=f(n),m=u(n),y={bodies:l,springs:p,settings:n,step:function(){t();var e=c(l,n.timeStep);return h.update(),e<n.stableThreshold},addBody:function(e){if(!e)throw new Error("Body is required");return l.push(e),e},addBodyAt:function(e){if(!e)throw new Error("Body position is required");var n=d(e);return l.push(n),n},removeBody:function(e){if(e){var n=l.indexOf(e);if(!(0>n))return l.splice(n,1),0===l.length&&h.reset(),!0}},addSpring:function(e,n,t,o,i){if(!e||!n)throw new Error("Cannot add null spring to force simulator");"number"!=typeof t&&(t=-1);var a=new r(e,n,t,i>=0?i:-1,o);return p.push(a),a},removeSpring:function(e){if(e){var n=p.indexOf(e);return n>-1?(p.splice(n,1),!0):void 0}},getBestNewBodyPosition:function(e){return h.getBestNewPosition(e)},getBBox:function(){return h.box},gravity:function(e){return void 0!==e?(n.gravity=e,v.options({gravity:e}),this):n.gravity},theta:function(e){return void 0!==e?(n.theta=e,v.options({theta:e}),this):n.theta}};return o(n,y),y}n.exports=t},{"./lib/bounds":9,"./lib/createBody":10,"./lib/dragForce":11,"./lib/eulerIntegrator":12,"./lib/spring":13,"./lib/springForce":14,"ngraph.expose":15,"ngraph.merge":25,"ngraph.quadtreebh":17}],9:[function(e,n){n.exports=function(n,t){function r(){var e=n.length;if(0!==e){for(var t=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;e--;){var s=n[e];s.isPinned?(s.pos.x=s.prevPos.x,s.pos.y=s.prevPos.y):(s.prevPos.x=s.pos.x,s.prevPos.y=s.pos.y),s.pos.x<t&&(t=s.pos.x),s.pos.x>o&&(o=s.pos.x),s.pos.y<r&&(r=s.pos.y),s.pos.y>a&&(a=s.pos.y)}i.x1=t,i.x2=o,i.y1=r,i.y2=a}}var o=e("ngraph.random").random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:r,reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(e){var n=i,r=0,a=0;if(e.length){for(var s=0;s<e.length;++s)r+=e[s].pos.x,a+=e[s].pos.y;r/=e.length,a/=e.length}else r=(n.x1+n.x2)/2,a=(n.y1+n.y2)/2;var u=t.springLength;return{x:r+o.next(u)-u/2,y:a+o.next(u)-u/2}}}}},{"ngraph.random":26}],10:[function(e,n){var t=e("ngraph.physics.primitives");n.exports=function(e){return new t.Body(e)}},{"ngraph.physics.primitives":16}],11:[function(e,n){n.exports=function(n){var t=e("ngraph.merge"),r=e("ngraph.expose");n=t(n,{dragCoeff:.02});var o={update:function(e){e.force.x-=n.dragCoeff*e.velocity.x,e.force.y-=n.dragCoeff*e.velocity.y}};return r(n,o,["dragCoeff"]),o}},{"ngraph.expose":15,"ngraph.merge":25}],12:[function(e,n){function t(e,n){var t,r=0,o=0,i=0,a=0,s=e.length;for(t=0;s>t;++t){var u=e[t],f=n/u.mass;u.velocity.x+=f*u.force.x,u.velocity.y+=f*u.force.y;var c=u.velocity.x,d=u.velocity.y,l=Math.sqrt(c*c+d*d);l>1&&(u.velocity.x=c/l,u.velocity.y=d/l),r=n*u.velocity.x,i=n*u.velocity.y,u.pos.x+=r,u.pos.y+=i,o+=Math.abs(r),a+=Math.abs(i)}return(o*o+a*a)/e.length}n.exports=t},{}],13:[function(e,n){function t(e,n,t,r,o){this.from=e,this.to=n,this.length=t,this.coeff=r,this.weight="number"==typeof o?o:1}n.exports=t},{}],14:[function(e,n){n.exports=function(n){var t=e("ngraph.merge"),r=e("ngraph.random").random(42),o=e("ngraph.expose");n=t(n,{springCoeff:2e-4,springLength:80});var i={update:function(e){var t=e.from,o=e.to,i=e.length<0?n.springLength:e.length,a=o.pos.x-t.pos.x,s=o.pos.y-t.pos.y,u=Math.sqrt(a*a+s*s);0===u&&(a=(r.nextDouble()-.5)/50,s=(r.nextDouble()-.5)/50,u=Math.sqrt(a*a+s*s));var f=u-i,c=(!e.coeff||e.coeff<0?n.springCoeff:e.coeff)*f/u*e.weight;t.force.x+=c*a,t.force.y+=c*s,o.force.x-=c*a,o.force.y-=c*s}};return o(n,i,["springCoeff","springLength"]),i}},{"ngraph.expose":15,"ngraph.merge":25,"ngraph.random":26}],15:[function(e,n){function t(e,n,t){var o="[object Array]"===Object.prototype.toString.call(t);if(o)for(var i=0;i<t.length;++i)r(e,n,t[i]);else for(var a in e)r(e,n,a)}function r(e,n,t){if(e.hasOwnProperty(t)){if("function"==typeof n[t])return;n[t]=function(r){return void 0!==r?(e[t]=r,n):e[t]}}}n.exports=t},{}],16:[function(e,n){function t(e,n){this.pos=new r(e,n),this.prevPos=new r(e,n),this.force=new r,this.velocity=new r,this.mass=1}function r(e,n){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0)}function o(e,n,t){this.pos=new i(e,n,t),this.prevPos=new i(e,n,t),this.force=new i,this.velocity=new i,this.mass=1}function i(e,n,t){e&&"number"!=typeof e?(this.x="number"==typeof e.x?e.x:0,this.y="number"==typeof e.y?e.y:0,this.z="number"==typeof e.z?e.z:0):(this.x="number"==typeof e?e:0,this.y="number"==typeof n?n:0,this.z="number"==typeof t?t:0)}n.exports={Body:t,Vector2d:r,Body3d:o,Vector3d:i},t.prototype.setPosition=function(e,n){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n},r.prototype.reset=function(){this.x=this.y=0},o.prototype.setPosition=function(e,n,t){this.prevPos.x=this.pos.x=e,this.prevPos.y=this.pos.y=n,this.prevPos.z=this.pos.z=t},i.prototype.reset=function(){this.x=this.y=this.z=0}},{}],17:[function(e,n){n.exports=function(n){n=n||{},n.gravity="number"==typeof n.gravity?n.gravity:-1,n.theta="number"==typeof n.theta?n.theta:.8;var t=e("ngraph.random").random(1984),r=e("./node"),o=e("./insertStack"),i=e("./isSamePosition"),a=n.gravity,s=[],u=new o,f=n.theta,c=[],d=0,l=function(){var e=c[d];return e?(e.quads[0]=null,e.quads[1]=null,e.quads[2]=null,e.quads[3]=null,e.body=null,e.mass=e.massX=e.massY=0,e.left=e.right=e.top=e.bottom=0):(e=new r,c[d]=e),++d,e},p=l(),v=function(e){for(u.reset(),u.push(p,e);!u.isEmpty();){var n=u.pop(),r=n.node,o=n.body;if(r.body){var a=r.body;if(r.body=null,i(a.pos,o.pos)){var s=3;do{var f=t.nextDouble(),c=(r.right-r.left)*f,d=(r.bottom-r.top)*f;a.pos.x=r.left+c,a.pos.y=r.top+d,s-=1}while(s>0&&i(a.pos,o.pos));if(0===s&&i(a.pos,o.pos))return}u.push(r,a),u.push(r,o)}else{var v=o.pos.x,h=o.pos.y;r.mass=r.mass+o.mass,r.massX=r.massX+o.mass*v,r.massY=r.massY+o.mass*h;var g=0,m=r.left,y=(r.right+m)/2,x=r.top,w=(r.bottom+x)/2;if(v>y){g+=1;var b=m;m=y,y+=y-b}if(h>w){g+=2;var E=x;x=w,w+=w-E}var L=r.quads[g];L?u.push(L,o):(L=l(),L.left=m,L.top=x,L.right=y,L.bottom=w,L.body=o,r.quads[g]=L)}}},h=function(e){var n,r,o,i,u=s,c=0,d=0,l=1,v=0,h=1;for(u[0]=p;l;){var g=u[v],m=g.body;l-=1,v+=1,m&&m!==e?(r=m.pos.x-e.pos.x,o=m.pos.y-e.pos.y,i=Math.sqrt(r*r+o*o),0===i&&(r=(t.nextDouble()-.5)/50,o=(t.nextDouble()-.5)/50,i=Math.sqrt(r*r+o*o)),n=a*m.mass*e.mass/(i*i*i),c+=n*r,d+=n*o):(r=g.massX/g.mass-e.pos.x,o=g.massY/g.mass-e.pos.y,i=Math.sqrt(r*r+o*o),0===i&&(r=(t.nextDouble()-.5)/50,o=(t.nextDouble()-.5)/50,i=Math.sqrt(r*r+o*o)),(g.right-g.left)/i<f?(n=a*g.mass*e.mass/(i*i*i),c+=n*r,d+=n*o):(g.quads[0]&&(u[h]=g.quads[0],l+=1,h+=1),g.quads[1]&&(u[h]=g.quads[1],l+=1,h+=1),g.quads[2]&&(u[h]=g.quads[2],l+=1,h+=1),g.quads[3]&&(u[h]=g.quads[3],l+=1,h+=1)))}e.force.x+=c,e.force.y+=d},g=function(e){var n,t=Number.MAX_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,i=Number.MIN_VALUE,a=e.length;for(n=a;n--;){var s=e[n].pos.x,u=e[n].pos.y;t>s&&(t=s),s>o&&(o=s),r>u&&(r=u),u>i&&(i=u)}var f=o-t,c=i-r;for(f>c?i=r+f:o=t+c,d=0,p=l(),p.left=t,p.right=o,p.top=r,p.bottom=i,n=a-1,n>0&&(p.body=e[n]);n--;)v(e[n],p)};return{insertBodies:g,updateBodyForce:h,options:function(e){return e?("number"==typeof e.gravity&&(a=e.gravity),"number"==typeof e.theta&&(f=e.theta),this):{gravity:a,theta:f}}}}},{"./insertStack":18,"./isSamePosition":19,"./node":20,"ngraph.random":26}],18:[function(e,n){function t(){this.stack=[],this.popIdx=0}function r(e,n){this.node=e,this.body=n}n.exports=t,t.prototype={isEmpty:function(){return 0===this.popIdx},push:function(e,n){var t=this.stack[this.popIdx];t?(t.node=e,t.body=n):this.stack[this.popIdx]=new r(e,n),++this.popIdx},pop:function(){return this.popIdx>0?this.stack[--this.popIdx]:void 0},reset:function(){this.popIdx=0}}},{}],19:[function(e,n){n.exports=function(e,n){var t=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return 1e-8>t&&1e-8>r}},{}],20:[function(e,n){n.exports=function(){this.body=null,this.quads=[],this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},{}],21:[function(e,n){function t(e,n){function t(){return o(e,n,arguments)}return n=n||"Argument",{has:t}}function r(){function e(e,t){return o(e,t,n)}var n=arguments;return e}function o(e,n,t){if(void 0===e)throw new Error(n+" is not defined");for(var r=0;r<t.length;++r)if(void 0===e[t[r]])throw new Error(n+" is expected to have a property `"+t[r]+"`");return!0}n.exports=t,n.exports.has=r},{}],22:[function(e,n){function t(e,n,t){var i;n=n||r,t=t||r,i="string"==typeof e?JSON.parse(e):e;var a,s=o();if(void 0===i.links||void 0===i.nodes)throw new Error("Cannot load graph without links and nodes");for(a=0;a<i.nodes.length;++a){var u=n(i.nodes[a]);if(!u.hasOwnProperty("id"))throw new Error("Graph node format is invalid: Node id is missing");s.addNode(u.id,u.data)}for(a=0;a<i.links.length;++a){var f=t(i.links[a]);if(!f.hasOwnProperty("fromId")||!f.hasOwnProperty("toId"))throw new Error("Graph link format is invalid. Both fromId and toId are required");s.addLink(f.fromId,f.toId,f.data)}return s}function r(e){return e}n.exports=t;var o=e("ngraph.graph")},{"ngraph.graph":24}],23:[function(e,n){function t(e){if(!e||0>e)throw new Error("Invalid number of nodes");var n,t=l();for(n=0;e-1>n;++n)t.addLink(n,n+1),t.addLink(e+n,e+n+1),t.addLink(n,e+n);return t.addLink(e-1,2*e-1),t}function r(e){if(!e||0>e)throw new Error("Invalid number of nodes");var n=t(e);return n.addLink(0,e-1),n.addLink(e,2*e-1),n}function o(e){if(!e||1>e)throw new Error("At least two nodes are expected for complete graph");var n,t,r=l();for(n=0;e>n;++n)for(t=n+1;e>t;++t)n!==t&&r.addLink(n,t);return r}function i(e,n){if(!e||!n||0>e||0>n)throw new Error("Graph dimensions are invalid. Number of nodes in each partition should be greater than 0");var t,r,o=l();for(t=0;e>t;++t)for(r=e;e+n>r;++r)o.addLink(t,r);return o}function a(e){if(!e||0>e)throw new Error("Invalid number of nodes");var n,t=l();for(t.addNode(0),n=1;e>n;++n)t.addLink(n-1,n);return t}function s(e,n){if(1>e||1>n)throw new Error("Invalid number of nodes in grid graph");var t,r,o=l();if(1===e&&1===n)return o.addNode(0),o;for(t=0;e>t;++t)for(r=0;n>r;++r){var i=t+r*e;t>0&&o.addLink(i,t-1+r*e),r>0&&o.addLink(i,t+(r-1)*e)}return o}function u(e,n,t){if(1>e||1>n||1>t)throw new Error("Invalid number of nodes in grid3 graph");var r,o,i,a=l();if(1===e&&1===n&&1===t)return a.addNode(0),a;for(i=0;t>i;++i)for(r=0;e>r;++r)for(o=0;n>o;++o){var s=i*e*n,u=r+o*e+s;r>0&&a.addLink(u,r-1+o*e+s),o>0&&a.addLink(u,r+(o-1)*e+s),i>0&&a.addLink(u,r+o*e+(i-1)*e*n)}return a}function f(e){if(0>e)throw new Error("Invalid number of nodes in balanced tree");var n,t=l(),r=Math.pow(2,e);for(0===e&&t.addNode(1),n=1;r>n;++n){var o=n,i=2*o,a=2*o+1;t.addLink(o,i),t.addLink(o,a)}return t}function c(e){if(0>e)throw new Error("Number of nodes shoul be >= 0");var n,t=l();for(n=0;e>n;++n)t.addNode(n);return t}function d(n,t,r,o){if(t>=n)throw new Error("Choose smaller `k`. It cannot be larger than number of nodes `n`");var i,a,s=e("ngraph.random").random(o||42),u=l();for(i=0;n>i;++i)u.addNode(i);for(var f=Math.floor(t/2+1),c=1;f>c;++c)for(i=0;n>i;++i)a=(c+i)%n,u.addLink(i,a);for(c=1;f>c;++c)for(i=0;n>i;++i)if(s.nextDouble()<r){var d=i;a=(c+i)%n;var p=s.next(n),v=p===d||u.hasLink(d,p);if(v&&u.getLinks(d).length===n-1)continue;for(;v;)p=s.next(n),v=p===d||u.hasLink(d,p);var h=u.hasLink(d,a);u.removeLink(h),u.addLink(d,p)}return u}n.exports={ladder:t,complete:o,completeBipartite:i,balancedBinTree:f,path:a,circularLadder:r,grid:s,grid3:u,noLinks:c,wattsStrogatz:d};var l=e("ngraph.graph")},{"ngraph.graph":24,"ngraph.random":26}],24:[function(e,n){function t(){function e(){function e(){return S=y,D=x,T=n,C=t,M.on=r,r.apply(M,arguments)}var r=M.on;M.on=e}function n(e,n){I.push({link:e,changeType:n})}function t(e,n){I.push({node:e,changeType:n})}function s(e,n){if(void 0===e)throw new Error("Invalid node identifier");S();var t=u(e);return t?C(t,"update"):(t=new o(e),A++,C(t,"add")),t.data=n,L[e]=t,D(),t}function u(e){return L[e]}function f(e){var n=u(e);if(!n)return!1;for(S();n.links.length;){var t=n.links[0];l(t)}return delete L[e],A--,C(n,"remove"),D(),!0}function c(e,n,t){S();var r=u(e)||s(e),o=u(n)||s(n),a=e.toString()+_+n.toString(),f=N.hasOwnProperty(a);(f||p(e,n))&&(f||(N[a]=0),a+="@"+ ++N[a]);var c=new i(e,n,t,a);return P.push(c),r.links.push(c),e!==n&&o.links.push(c),T(c,"add"),D(),c}function d(e){var n=u(e);return n?n.links:null}function l(e){if(!e)return!1;var n=r(e,P);if(0>n)return!1;S(),P.splice(n,1);var t=u(e.fromId),o=u(e.toId);return t&&(n=r(e,t.links),n>=0&&t.links.splice(n,1)),o&&(n=r(e,o.links),n>=0&&o.links.splice(n,1)),T(e,"remove"),D(),!0}function p(e,n){var t,r=u(e);if(!r)return null;for(t=0;t<r.links.length;++t){var o=r.links[t];if(o.fromId===e&&o.toId===n)return o}return null}function v(){S(),j(function(e){f(e.id)}),D()}function h(e){var n,t;if("function"==typeof e)for(n=0,t=P.length;t>n;++n)e(P[n])}function g(e,n,t){var r,o,i,a=u(e);if(a&&a.links&&"function"==typeof n)if(t)for(r=0;r<a.links.length;++r)o=a.links[r],o.fromId===e&&n(L[o.toId],o);else for(r=0;r<a.links.length;++r)o=a.links[r],i=o.fromId===e?o.toId:o.fromId,n(L[i],o)}function m(){}function y(){k+=1}function x(){k-=1,0===k&&I.length>0&&(M.fire("changed",I),I.length=0)}function w(){return Object.keys?b:E}function b(e){if("function"==typeof e)for(var n=Object.keys(L),t=0;t<n.length;++t)if(e(L[n[t]]))return}function E(e){if("function"==typeof e){var n;for(n in L)if(e(L[n]))return}}var L="function"==typeof Object.create?Object.create(null):{},P=[],N={},A=0,k=0,j=w(),_="ðŸ‘‰ ",I=[],T=m,C=m,S=m,D=m,M={addNode:s,addLink:c,removeLink:l,removeNode:f,getNode:u,getNodesCount:function(){return A},getLinksCount:function(){return P.length},getLinks:d,forEachNode:j,forEachLinkedNode:g,forEachLink:h,beginUpdate:S,endUpdate:D,clear:v,hasLink:p,getLink:p};return a(M),e(),M}function r(e,n){if(n.indexOf)return n.indexOf(e);var t,r=n.length;for(t=0;r>t;t+=1)if(n[t]===e)return t;return-1}function o(e){this.id=e,this.links=[],this.data=null}function i(e,n,t,r){this.fromId=e,this.toId=n,this.data=t,this.id=r}n.exports=t;var a=e("ngraph.events")},{"ngraph.events":6}],25:[function(e,n){function t(e,n){var r;if(e||(e={}),n)for(r in n)if(n.hasOwnProperty(r)){var o=e.hasOwnProperty(r),i=typeof n[r],a=!o||typeof e[r]!==i;a?e[r]=n[r]:"object"===i&&(e[r]=t(e[r],n[r]))}return e}n.exports=t},{}],26:[function(e,n){function t(e){var n="number"==typeof e?e:+new Date,t=function(){return n=n+2127912214+(n<<12)&4294967295,n=4294967295&(3345072700^n^n>>>19),n=n+374761393+(n<<5)&4294967295,n=4294967295&(n+3550635116^n<<9),n=n+4251993797+(n<<3)&4294967295,n=4294967295&(3042594569^n^n>>>16),(268435455&n)/268435456};return{next:function(e){return Math.floor(t()*e)},nextDouble:function(){return t()}}}function r(e,n){var r=n||t();if("function"!=typeof r.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var t,o,i;for(t=e.length-1;t>0;--t)o=r.next(t+1),i=e[o],e[o]=e[t],e[t]=i,n(i);e.length&&n(e[0])},shuffle:function(){var n,t,o;for(n=e.length-1;n>0;--n)t=r.next(n+1),o=e[t],e[t]=e[n],e[n]=o;return e}}}n.exports={random:t,randomIterator:r}},{}],27:[function(e,n){function t(e,n,t){function r(e){s.nodes.push(u(e))}function o(e){s.links.push(f(e))}function i(e){var n={id:e.id};return void 0!==e.data&&(n.data=e.data),n}function a(e){var n={fromId:e.fromId,toId:e.toId};return void 0!==e.data&&(n.data=e.data),n}var s={nodes:[],links:[]},u=n||i,f=t||a;return e.forEachNode(r),e.forEachLink(o),JSON.stringify(s)}n.exports=t},{}],28:[function(e,n){function t(e,n){var t=r(e);if(void 0===n)return t;for(var o=Object.keys(n),i=0;i<o.length;++i){var a=o[i],s=n[a];"link"===a?t.link(s):t.attr(a,s)}return t}function r(e){function n(e){return v||(v=o(p)),v.link(e),p}function r(e,n,t){return i.addEventListener(p,e,n,t),p}function u(e,n,t){return i.removeEventListener(p,e,n,t),p}function f(e){var n=t(e);return p.appendChild(n),n}function c(e,n){return 2===arguments.length?(null!==n?p.setAttributeNS(null,e,n):p.removeAttributeNS(null,e),p):p.getAttributeNS(null,e)}function d(e){return arguments.length?(p.setAttributeNS(s,"xlink:href",e),p):p.getAttributeNS(s,"xlink:href")}function l(e){return void 0!==e?(p.textContent=e,p):p.textContent}var p=e;if("string"==typeof e)p=window.document.createElementNS(a,e);else if(e.simplesvg)return e;var v;return p.simplesvg=!0,p.attr=c,p.append=f,p.link=d,p.text=l,p.on=r,p.off=u,p.dataSource=n,p}n.exports=t,t.compile=e("./lib/compile");var o=t.compileTemplate=e("./lib/compileTemplate"),i=e("add-event-listener"),a="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xlink"},{"./lib/compile":29,"./lib/compileTemplate":30,"add-event-listener":32}],29:[function(e,n){function t(e){try{return e=r(e),i(o.parseFromString(e,"text/xml").documentElement)}catch(n){throw n}}function r(e){if(e){var n='xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg"',t=e.match(/^<\w+/);if(t){var r=t[0].length;return e.substr(0,r)+" "+n+" "+e.substr(r)}throw new Error("Cannot parse input text: invalid xml?")}}var o=e("./domparser.js"),i=e("../");n.exports=t},{"../":28,"./domparser.js":31}],30:[function(e,n){function t(e){var n=Object.create(null);return r(e,n),{link:function(e){function t(n){n(e)}Object.keys(n).forEach(function(e){var r=n[e];r.forEach(t)})}}}function r(e,n){var t=e.nodeType,a=1===t||3===t;if(a){var s;if(e.hasChildNodes()){var u=e.childNodes;for(s=0;s<u.length;++s)r(u[s],n)}if(3===t&&i(e,n),e.attributes){var f=e.attributes;for(s=0;s<f.length;++s)o(f[s],e,n)}}}function o(e,n,t){function r(e){n.setAttributeNS(null,s,e[u])}var o=e.value;if(o){var i=o.match(a);if(i){var s=e.localName,u=i[1],f=u.indexOf(".")<0;if(!f)throw new Error("simplesvg currently does not support nested bindings");var c=t[u];c?c.push(r):c=t[u]=[r]}}}function i(e,n){function t(n){e.nodeValue=n[i]}var r=e.nodeValue;if(r){var o=r.match(a);if(o){var i=o[1],s=(i.indexOf(".")<0,n[i]);s?s.push(t):s=n[i]=[t]}}}n.exports=t;var a=/{{(.+?)}}/},{}],31:[function(e,n){function t(){return"undefined"==typeof DOMParser?{parseFromString:r}:new DOMParser}function r(){throw new Error("DOMParser is not supported by this platform. Please open issue here https://github.com/anvaka/simplesvg")}n.exports=t()},{}],32:[function(e,n){function t(e,n,t,r){return u=u||(document.addEventListener?{add:o,rm:i}:{add:a,rm:s}),u.add(e,n,t,r)}function r(e,n,t,r){return u=u||(document.addEventListener?{add:o,rm:i}:{add:a,rm:s}),u.rm(e,n,t,r)}function o(e,n,t,r){e.addEventListener(n,t,r)}function i(e,n,t,r){e.removeEventListener(n,t,r)}function a(e,n,t,r){if(r)throw new Error("cannot useCapture in oldIE");e.attachEvent("on"+n,t)}function s(e,n,t){e.detachEvent("on"+n,t)}t.removeEventListener=r,t.addEventListener=t,n.exports=t;var u=null},{}],33:[function(e,n){function t(){return{betweennessCentrality:r,degreeCentrality:o}}function r(e){var n=a.betweenness(e);return i(n)}function o(e,n){var t=a.degree(e,n);return i(t)}function i(e){function n(n,t){return e[t]-e[n]}function t(n){return{key:n,value:e[n]}}return Object.keys(e).sort(n).map(t)}var a=e("ngraph.centrality");n.exports=t},{"ngraph.centrality":3}],34:[function(e,n){function t(){return{density:function(e,n){var t=e.getNodesCount();return 0===t?0/0:n?e.getLinksCount()/(t*(t-1)):2*e.getLinksCount()/(t*(t-1))}}}n.exports=t},{}],35:[function(e,n){function t(e,n){var t={};return{bindDragNDrop:function(e,o){var i;if(o){var a=n.getNodeUI(e.id);i=r(a),"function"==typeof o.onStart&&i.onStart(o.onStart),"function"==typeof o.onDrag&&i.onDrag(o.onDrag),"function"==typeof o.onStop&&i.onStop(o.onStop),t[e.id]=i}else(i=t[e.id])&&(i.release(),delete t[e.id])}}}n.exports=t;var r=e("./dragndrop.js")},{"./dragndrop.js":36}],36:[function(e,n){function t(e){var n,t,a,s,u,f,c,d=0,l=0,p=!1,v=0,h=function(e){var n=0,t=0;return e=e||window.event,e.pageX||e.pageY?(n=e.pageX,t=e.pageY):(e.clientX||e.clientY)&&(n=e.clientX+window.document.body.scrollLeft+window.document.documentElement.scrollLeft,t=e.clientY+window.document.body.scrollTop+window.document.documentElement.scrollTop),[n,t]},g=function(e,n,r){t&&t(e,{x:n-d,y:r-l}),d=n,l=r},m=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},y=function(e){e.preventDefault&&e.preventDefault()},x=function(e){return m(e),!1},w=function(e){e=e||window.event,g(e,e.clientX,e.clientY)},b=function(e){if(e=e||window.event,p)return m(e),!1;var t=1===e.button&&null!==window.event||0===e.button;return t?(d=e.clientX,l=e.clientY,c=e.target||e.srcElement,n&&n(e,{x:d,y:l}),r.on("mousemove",w),r.on("mouseup",E),m(e),u=window.document.onselectstart,f=window.document.ondragstart,window.document.onselectstart=x,c.ondragstart=x,!1):void 0},E=function(e){e=e||window.event,r.off("mousemove",w),r.off("mouseup",E),window.document.onselectstart=u,c.ondragstart=f,c=null,a&&a(e)},L=function(n){if("function"==typeof s){n=n||window.event,n.preventDefault&&n.preventDefault(),n.returnValue=!1;var t,r=h(n),o=i(e),a={x:r[0]-o[0],y:r[1]-o[1]};t=n.wheelDelta?n.wheelDelta/360:n.detail/-9,s(n,t,a)}},P=function(n){!s&&n?"webkit"===o.browser?e.addEventListener("mousewheel",L,!1):e.addEventListener("DOMMouseScroll",L,!1):s&&!n&&("webkit"===o.browser?e.removeEventListener("mousewheel",L,!1):e.removeEventListener("DOMMouseScroll",L,!1)),s=n},N=function(e,n){return(e.clientX-n.clientX)*(e.clientX-n.clientX)+(e.clientY-n.clientY)*(e.clientY-n.clientY)},A=function(e){if(1===e.touches.length){m(e);var n=e.touches[0];g(e,n.clientX,n.clientY)}else if(2===e.touches.length){var t=N(e.touches[0],e.touches[1]),r=0;v>t?r=-1:t>v&&(r=1),s(e,r,{x:e.touches[0].clientX,y:e.touches[0].clientY}),v=t,m(e),y(e)}},k=function(e){p=!1,r.off("touchmove",A),r.off("touchend",k),r.off("touchcancel",k),c=null,a&&a(e)},j=function(e,t){m(e),y(e),d=t.clientX,l=t.clientY,c=e.target||e.srcElement,n&&n(e,{x:d,y:l}),p||(p=!0,r.on("touchmove",A),r.on("touchend",k),r.on("touchcancel",k))},_=function(e){return 1===e.touches.length?j(e,e.touches[0]):void(2===e.touches.length&&(m(e),y(e),v=N(e.touches[0],e.touches[1])))};return e.addEventListener("mousedown",b),e.addEventListener("touchstart",_),{onStart:function(e){return n=e,this},onDrag:function(e){return t=e,this},onStop:function(e){return a=e,this},onScroll:function(e){return P(e),this},release:function(){e.removeEventListener("mousedown",b),e.removeEventListener("touchstart",_),r.off("mousemove",w),r.off("mouseup",E),r.off("touchmove",A),r.off("touchend",k),r.off("touchcancel",k),P(null)
}}}n.exports=t;var r=e("../Utils/documentEvents.js"),o=e("../Utils/browserInfo.js"),i=e("../Utils/findElementPosition.js")},{"../Utils/browserInfo.js":40,"../Utils/documentEvents.js":41,"../Utils/findElementPosition.js":42}],37:[function(e,n){function t(e,n){var t=r(n),o=null,i={},a={x:0,y:0};return t.mouseDown(function(e,n){o=e,a.x=n.clientX,a.y=n.clientY,t.mouseCapture(o);var r=i[e.id];return r&&r.onStart&&r.onStart(n,a),!0}).mouseUp(function(e){t.releaseMouseCapture(o),o=null;var n=i[e.id];return n&&n.onStop&&n.onStop(),!0}).mouseMove(function(e,n){if(o){var t=i[o.id];return t&&t.onDrag&&t.onDrag(n,{x:n.clientX-a.x,y:n.clientY-a.y}),a.x=n.clientX,a.y=n.clientY,!0}}),{bindDragNDrop:function(e,n){i[e.id]=n,n||delete i[e.id]}}}n.exports=t;var r=e("../WebGL/webglInputEvents.js")},{"../WebGL/webglInputEvents.js":58}],38:[function(e,n){function t(e,n){function t(e){return d[e]}n=r(n,{maxX:1024,maxY:1024,seed:"Deterministic randomness made me do this"});var a=o(n.seed),s=new i(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),u={},f=function(){return{x:a.next(n.maxX),y:a.next(n.maxY)}},c=function(e,n){e.x<n.x1&&(n.x1=e.x),e.x>n.x2&&(n.x2=e.x),e.y<n.y1&&(n.y1=e.y),e.y>n.y2&&(n.y2=e.y)},d="function"==typeof Object.create?Object.create(null):{},l=function(e){d[e.id]=f(e),c(d[e.id],s)},p=function(){0!==e.getNodesCount()&&(s.x1=Number.MAX_VALUE,s.y1=Number.MAX_VALUE,s.x2=Number.MIN_VALUE,s.y2=Number.MIN_VALUE,e.forEachNode(l))},v=function(e){u[e.id]=e},h=function(e){for(var n=0;n<e.length;++n){var t=e[n];t.node&&("add"===t.changeType?l(t.node):delete d[t.node.id]),t.link&&("add"===t.changeType?v(t.link):delete u[t.link.id])}};return e.forEachNode(l),e.forEachLink(v),e.on("changed",h),{run:function(){this.step()},step:function(){return p(),!0},getGraphRect:function(){return s},dispose:function(){e.off("change",h)},isNodePinned:function(){return!0},pinNode:function(){},getNodePosition:t,getLinkPosition:function(e){var n=u[e];return{from:t(n.fromId),to:t(n.toId)}},setNodePosition:function(e,n,t){var r=d[e];r&&(r.x=n,r.y=t)},placeNode:function(e){return"function"==typeof e?(f=e,p(),this):f(e)}}}n.exports=t;var r=e("ngraph.merge"),o=e("ngraph.random").random,i=e("../Utils/rect.js")},{"../Utils/rect.js":46,"ngraph.merge":25,"ngraph.random":26}],39:[function(e,n){function t(e){function n(){var n=r(e);return n.addEventListener=n.on,n}if(console.log("This method is deprecated. Please use Viva.events() instead"),!e)return e;var t=void 0!==e.on||void 0!==e.off||void 0!==e.fire;return t?{extend:function(){return e},on:e.on,stop:e.off}:{extend:n,on:e.on,stop:e.off}}var r=e("ngraph.events");n.exports=t},{"ngraph.events":6}],40:[function(e,n){function t(){if("undefined"==typeof window||!window.hasOwnProperty("navigator"))return{browser:"",version:"0"};var e=window.navigator.userAgent.toLowerCase(),n=/(webkit)[ \/]([\w.]+)/,t=/(opera)(?:.*version)?[ \/]([\w.]+)/,r=/(msie) ([\w.]+)/,o=/(mozilla)(?:.*? rv:([\w.]+))?/,i=n.exec(e)||t.exec(e)||r.exec(e)||e.indexOf("compatible")<0&&o.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}n.exports=t()},{}],41:[function(e,n){function t(){return void 0===typeof document?i:{on:r,off:o}}function r(e,n){document.addEventListener(e,n)}function o(e,n){document.removeEventListener(e,n)}var i=e("./nullEvents.js");n.exports=t()},{"./nullEvents.js":45}],42:[function(e,n){function t(e){var n=0,t=0;if(e.offsetParent)do n+=e.offsetLeft,t+=e.offsetTop;while(null!==(e=e.offsetParent));return[n,t]}n.exports=t},{}],43:[function(e,n){function t(e){if(!e)throw{message:"Cannot get dimensions of undefined container"};var n=e.clientWidth,t=e.clientHeight;return{left:0,top:0,width:n,height:t}}n.exports=t},{}],44:[function(e,n){function t(e,n,t,o,i,a,s,u){return r(e,n,e,o,i,a,s,u)||r(e,o,t,o,i,a,s,u)||r(t,o,t,n,i,a,s,u)||r(t,n,e,n,i,a,s,u)}var r=e("gintersect");n.exports=t},{gintersect:2}],45:[function(e,n){function t(){return{on:r,off:r,stop:r}}function r(){}n.exports=t()},{}],46:[function(e,n){function t(e,n,t,r){this.x1=e||0,this.y1=n||0,this.x2=t||0,this.y2=r||0}n.exports=t},{}],47:[function(e,n){(function(e){function t(){function n(e){var n,t=function(){r.cancelAnimationFrame(n),n=0},o=function(){n=r.requestAnimationFrame(o),e()||t()};return o(),{stop:t,restart:function(){n||o()}}}var t,r,o=0,i=["ms","moz","webkit","o"];for(r="undefined"!=typeof window?window:"undefined"!=typeof e?e:{setTimeout:function(){},clearTimeout:function(){}},t=0;t<i.length&&!r.requestAnimationFrame;++t){var a=i[t];r.requestAnimationFrame=r[a+"RequestAnimationFrame"],r.cancelAnimationFrame=r[a+"CancelAnimationFrame"]||r[a+"CancelRequestAnimationFrame"]}return r.requestAnimationFrame||(r.requestAnimationFrame=function(e){var n=(new Date).getTime(),t=Math.max(0,16-(n-o)),i=r.setTimeout(function(){e(n+t)},t);return o=n+t,i}),r.cancelAnimationFrame||(r.cancelAnimationFrame=function(e){r.clearTimeout(e)}),n}n.exports=t()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,n){function t(){return void 0===typeof window?i:{on:r,off:o}}function r(e,n){window.addEventListener(e,n)}function o(e,n){window.removeEventListener(e,n)}var i=e("./nullEvents.js");n.exports=t()},{"./nullEvents.js":45}],49:[function(e,n){function t(e,n){var t=30;n=n||{};var d,l,p,v=n.layout,h=n.graphics,g=n.container,m=void 0!==n.interactive?n.interactive:!0,y=!1,x=!0,w=0,b=0,E=!1,L=!1,P=!1,N={x:0,y:0},A={offsetX:0,offsetY:0,scale:1},k=function(){g=g||window.document.body,v=v||o(e,o.simulator({springLength:80,springCoeff:2e-4})),h=h||i(e,{container:g}),n.hasOwnProperty("renderLinks")||(n.renderLinks=!0),n.prerender=n.prerender||0,d=(h.inputManager||s)(e,h)},j=r({}),_=function(){h.beginRender(),n.renderLinks&&h.renderLinks(),h.renderNodes(),h.endRender()},I=function(){return E=v.step()&&!L,_(),!E},T=function(e){return l?void(b+=e):void(e?(b+=e,l=u(function(){return I()},t)):(w=0,b=0,l=u(I,t)))},C=function(){P||(E=!1,l.restart())},S=function(){var e;if("number"==typeof n.prerender&&n.prerender>0)for(e=0;e<n.prerender;e+=1)v.step()},D=function(){var e=v.getGraphRect(),n=f(g);N.x=N.y=0,A.offsetX=n.width/2-(e.x2+e.x1)/2,A.offsetY=n.height/2-(e.y2+e.y1)/2,h.graphCenterChanged(A.offsetX,A.offsetY),x=!1},M=function(e){var n=v.getNodePosition(e.id);h.addNode(e,n)},U=function(e){h.releaseNode(e)},R=function(e){var n=v.getLinkPosition(e.id);h.addLink(e,n)},B=function(e){h.releaseLink(e)},O=function(e){var n=!1,t="string"==typeof m&&-1!==m.indexOf("node")||m;t&&d.bindDragNDrop(e,{onStart:function(){n=v.isNodePinned(e),v.pinNode(e,!0),L=!0,C()},onDrag:function(n,t){var r=v.getNodePosition(e.id);v.setNodePosition(e.id,r.x+t.x/A.scale,r.y+t.y/A.scale),L=!0,_()},onStop:function(){v.pinNode(e,n),L=!1}})},F=function(e){d.bindDragNDrop(e,null)},G=function(){h.init(g),e.forEachNode(M),n.renderLinks&&e.forEachLink(R)},z=function(){h.release(g)},Y=function(n){var t=n.node;"add"===n.changeType?(M(t),O(t),x&&D()):"remove"===n.changeType?(F(t),U(t),0===e.getNodesCount()&&(x=!0)):"update"===n.changeType&&(F(t),U(t),M(t),O(t))},X=function(e){var t=e.link;if("add"===e.changeType)n.renderLinks&&R(t);else if("remove"===e.changeType)n.renderLinks&&B(t);else if("update"===e.changeType)throw"Update type is not implemented. TODO: Implement me!"},q=function(e){var n,t;for(n=0;n<e.length;n+=1)t=e[n],t.node?Y(t):t.link&&X(t);C()},V=function(){D(),I()},W=function(){p&&(p.release(),p=null)},H=function(){e.off("changed",q)},J=function(e,n){if(!n){var t=f(g);n={x:t.width/2,y:t.height/2}}var r=Math.pow(1.4,e?-.2:.2);return A.scale=h.scale(r,n),_(),j.fire("scale",A.scale),A.scale},$=function(){a.on("resize",V),W();var n="string"==typeof m&&-1!==m.indexOf("drag")||m;n&&(p=c(g),p.onDrag(function(e,n){N.x+=n.x,N.y+=n.y,h.translateRel(n.x,n.y),_()}));var t="string"==typeof m&&-1!==m.indexOf("scroll")||m;t&&p.onScroll(function(e,n,t){J(0>n,t)}),e.forEachNode(O),H(),e.on("changed",q)},K=function(){y=!1,H(),W(),a.off("resize",V),j.removeAllListeners(),l.stop(),e.forEachLink(function(e){n.renderLinks&&B(e)}),e.forEachNode(function(e){F(e),U(e)}),v.dispose(),z()};return{run:function(e){return y||(k(),S(),D(),G(),$(),y=!0),T(e),this},reset:function(){h.resetScale(),D(),A.scale=1},pause:function(){P=!0,l.stop()},resume:function(){P=!1,l.restart()},rerender:function(){return _(),this},zoomOut:function(){return J(!0)},zoomIn:function(){return J(!1)},moveTo:function(e,n){h.graphCenterChanged(A.offsetX-e*A.scale,A.offsetY-n*A.scale),_()},getGraphics:function(){return h},dispose:function(){K()},on:function(e,n){return j.addEventListener(e,n),this},off:function(e,n){return j.removeEventListener(e,n),this}}}n.exports=t;var r=e("ngraph.graph"),o=e("ngraph.forcelayout"),i=e("./svgGraphics.js"),a=e("../Utils/windowEvents.js"),s=e("../Input/domInputManager.js"),u=e("../Utils/timer.js"),f=e("../Utils/getDimensions.js"),c=e("../Input/dragndrop.js")},{"../Input/domInputManager.js":35,"../Input/dragndrop.js":36,"../Utils/getDimensions.js":43,"../Utils/timer.js":47,"../Utils/windowEvents.js":48,"./svgGraphics.js":50,"ngraph.forcelayout":7,"ngraph.graph":24}],50:[function(e,n){function t(){function e(){var e=r("svg");return n=r("g").attr("buffered-rendering","dynamic"),e.appendChild(n),e}var n,t,a,s,u,f=1,c={},d={},l=function(){return r("rect").attr("width",10).attr("height",10).attr("fill","#00a2e8")},p=function(e,n){e.attr("x",n.x-5).attr("y",n.y-5)},v=function(){return r("line").attr("stroke","#999")},h=function(e,n,t){e.attr("x1",n.x).attr("y1",n.y).attr("x2",t.x).attr("y2",t.y)},g=function(e){e.fire("rescaled")},m={x:0,y:0},y={x:0,y:0},x={x:0,y:0},w=function(){if(n){var e="matrix("+f+", 0, 0,"+f+","+a+","+s+")";n.attr("transform",e)}};t=e();var b={getNodeUI:function(e){return c[e]},getLinkUI:function(e){return d[e]},node:function(e){return"function"==typeof e?(l=e,this):void 0},link:function(e){return"function"==typeof e?(v=e,this):void 0},placeNode:function(e){return p=e,this},placeLink:function(e){return h=e,this},beginRender:function(){},endRender:function(){},graphCenterChanged:function(e,n){a=e,s=n,w()},inputManager:i,translateRel:function(e,r){var o=t.createSVGPoint(),i=n.getCTM(),a=t.createSVGPoint().matrixTransform(i.inverse());o.x=e,o.y=r,o=o.matrixTransform(i.inverse()),o.x=(o.x-a.x)*i.a,o.y=(o.y-a.y)*i.d,i.e+=o.x,i.f+=o.y;var s="matrix("+i.a+", 0, 0,"+i.d+","+i.e+","+i.f+")";n.attr("transform",s)},scale:function(e,r){var o=t.createSVGPoint();o.x=r.x,o.y=r.y,o=o.matrixTransform(n.getCTM().inverse());var i=t.createSVGMatrix().translate(o.x,o.y).scale(e).translate(-o.x,-o.y),u=n.getCTM().multiply(i);f=u.a,a=u.e,s=u.f;var c="matrix("+u.a+", 0, 0,"+u.d+","+u.e+","+u.f+")";return n.attr("transform",c),g(this),f},resetScale:function(){f=1;var e="matrix(1, 0, 0, 1, 0, 0)";return n.attr("transform",e),g(this),this},init:function(e){e.appendChild(t),w(),"function"==typeof u&&u(t)},release:function(e){t&&e&&e.removeChild(t)},addLink:function(e,t){var r=v(e);if(r)return r.position=t,r.link=e,d[e.id]=r,n.childElementCount>0?n.insertBefore(r,n.firstChild):n.appendChild(r),r},releaseLink:function(e){var t=d[e.id];t&&(n.removeChild(t),delete d[e.id])},addNode:function(e,t){var r=l(e);if(r)return r.position=t,r.node=e,c[e.id]=r,n.appendChild(r),r},releaseNode:function(e){var t=c[e.id];t&&(n.removeChild(t),delete c[e.id])},renderNodes:function(){for(var e in c)if(c.hasOwnProperty(e)){var n=c[e];m.x=n.position.x,m.y=n.position.y,p(n,m,n.node)}},renderLinks:function(){for(var e in d)if(d.hasOwnProperty(e)){var n=d[e];y.x=n.position.from.x,y.y=n.position.from.y,x.x=n.position.to.x,x.y=n.position.to.y,h(n,y,x,n.link)}},getGraphicsRoot:function(e){return"function"==typeof e&&(t?e(t):u=e),t},getSvgRoot:function(){return t}};return o(b),b}n.exports=t;var r=e("simplesvg"),o=e("ngraph.events"),i=e("../Input/domInputManager.js")},{"../Input/domInputManager.js":35,"ngraph.events":6,simplesvg:28}],51:[function(e,n){function t(e){e=f(e,{enableBlending:!0,preserveDrawingBuffer:!1,clearColor:!1,clearColorValue:{r:1,g:1,b:1,a:1}});var n,t,c,d,l,p,v,h,g=0,m=0,y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],x=[],w=[],b={},E={},L=o(),P=i(),N=function(){return a()},A=function(){return s(3014898687)},k=function(){L.updateTransform(y),P.updateTransform(y)},j=function(){y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},_=function(){n&&t&&(d=t.width=Math.max(n.offsetWidth,1),l=t.height=Math.max(n.offsetHeight,1),c&&c.viewport(0,0,d,l),L&&L.updateSize(d/2,l/2),P&&P.updateSize(d/2,l/2))},I=function(e){e.fire("rescaled")};t=window.document.createElement("canvas");var T={getLinkUI:function(e){return E[e]},getNodeUI:function(e){return b[e]},node:function(e){return"function"==typeof e?(N=e,this):void 0},link:function(e){return"function"==typeof e?(A=e,this):void 0},placeNode:function(e){return p=e,this},placeLink:function(e){return v=e,this},inputManager:r,beginRender:function(){},endRender:function(){m>0&&L.render(),g>0&&P.render()},bringLinkToFront:function(e){var n,t,r=L.getFrontLinkId();L.bringToFront(e),r>e.id&&(n=e.id,t=w[r],w[r]=w[n],w[r].id=r,w[n]=t,w[n].id=n)},graphCenterChanged:function(e,n){y[12]=2*e/d-1,y[13]=1-2*n/l,k()},addLink:function(e,n){var t=m++,r=A(e);return r.id=t,r.pos=n,L.createLink(r),w[t]=r,E[e.id]=r,r},addNode:function(e,n){var t=g++,r=N(e);return r.id=t,r.position=n,r.node=e,P.createNode(r),x[t]=r,b[e.id]=r,r},translateRel:function(e,n){y[12]+=2*y[0]*e/d/y[0],y[13]-=2*y[5]*n/l/y[5],k()},scale:function(e,n){var t=2*n.x/d-1,r=1-2*n.y/l;return t-=y[12],r-=y[13],y[12]+=t*(1-e),y[13]+=r*(1-e),y[0]*=e,y[5]*=e,k(),I(this),y[0]},resetScale:function(){return j(),c&&(_(),k()),this},init:function(r){var o={};if(e.preserveDrawingBuffer&&(o.preserveDrawingBuffer=!0),n=r,_(),j(),n.appendChild(t),c=t.getContext("experimental-webgl",o),!c){var i="Could not initialize WebGL. Seems like the browser doesn't support it.";throw window.alert(i),i}if(e.enableBlending&&(c.blendFunc(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA),c.enable(c.BLEND)),e.clearColor){var a=e.clearColorValue;c.clearColor(a.r,a.g,a.b,a.a),this.beginRender=function(){c.clear(c.COLOR_BUFFER_BIT)}}L.load(c),L.updateSize(d/2,l/2),P.load(c),P.updateSize(d/2,l/2),k(),"function"==typeof h&&h(t)},release:function(e){t&&e&&e.removeChild(t)},isSupported:function(){var e=window.document.createElement("canvas"),n=e&&e.getContext&&e.getContext("experimental-webgl");return n},releaseLink:function(e){m>0&&(m-=1);var n=E[e.id];delete E[e.id],L.removeLink(n);var t=n.id;if(m>t){if(0===m||m===t)return;var r=w[m];w[t]=r,r.id=t}},releaseNode:function(e){g>0&&(g-=1);var n=b[e.id];delete b[e.id],P.removeNode(n);var t=n.id;if(g>t){if(0===g||g===t)return;var r=x[g];x[t]=r,r.id=t,P.replaceProperties(n,r)}},renderNodes:function(){for(var e={x:0,y:0},n=0;g>n;++n){var t=x[n];e.x=t.position.x,e.y=-t.position.y,p&&p(t,e),P.position(t,e)}},renderLinks:function(){if(!this.omitLinksRendering)for(var e={x:0,y:0},n={x:0,y:0},t=0;m>t;++t){var r=w[t],o=r.pos.from;n.x=o.x,n.y=-o.y,o=r.pos.to,e.x=o.x,e.y=-o.y,v&&v(r,n,e),L.position(r,n,e)}},getGraphicsRoot:function(e){return"function"==typeof e&&(t?e(t):h=e),t},setNodeProgram:function(e){if(!c&&e)P=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},setLinkProgram:function(e){if(!c&&e)L=e;else if(e)throw"Not implemented. Cannot swap shader on the fly... Yet."},transformClientToGraphCoordinates:function(e){return e.x=2*e.x/d-1,e.y=1-2*e.y/l,e.x=(e.x-y[12])/y[0],e.y=(e.y-y[13])/y[5],e.x*=d/2,e.y*=-l/2,e},getNodeAtClientPos:function(e,n){if("function"!=typeof n)return null;this.transformClientToGraphCoordinates(e);for(var t=0;g>t;++t)if(n(x[t],e.x,e.y))return x[t].node;return null}};return u(T),T}n.exports=t;var r=e("../Input/webglInputManager.js"),o=e("../WebGL/webglLinkProgram.js"),i=e("../WebGL/webglNodeProgram.js"),a=e("../WebGL/webglSquare.js"),s=e("../WebGL/webglLine.js"),u=e("ngraph.events"),f=e("ngraph.merge")},{"../Input/webglInputManager.js":37,"../WebGL/webglLine.js":59,"../WebGL/webglLinkProgram.js":60,"../WebGL/webglNodeProgram.js":61,"../WebGL/webglSquare.js":62,"ngraph.events":6,"ngraph.merge":25}],52:[function(e,n){function t(e){var n=10414335;if("string"==typeof e&&e)if(4===e.length&&(e=e.replace(/([^#])/g,"$1$1")),9===e.length)n=parseInt(e.substr(1),16);else{if(7!==e.length)throw'Color expected in hex format with preceding "#". E.g. #00ff00. Got value: '+e;n=parseInt(e.substr(1),16)<<8|255}else"number"==typeof e&&(n=e);return n}n.exports=t},{}],53:[function(e,n){function t(e){this.canvas=window.document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.isDirty=!1,this.canvas.width=this.canvas.height=e}n.exports=t},{}],54:[function(e,n){function t(e){var n=function(n,t){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);throw window.alert(o),o}return r};return{createProgram:function(t,r){var o=e.createProgram(),i=n(t,e.VERTEX_SHADER),a=n(r,e.FRAGMENT_SHADER);if(e.attachShader(o,i),e.attachShader(o,a),e.linkProgram(o),!e.getProgramParameter(o,e.LINK_STATUS)){var s=e.getShaderInfoLog(o);throw window.alert(s),s}return o},extendArray:function(e,n,t){if((n+1)*t>e.length){var r=new Float32Array(e.length*t*2);return r.set(e),r}return e},copyArrayPart:function(e,n,t,r){var o;for(o=0;r>o;++o)e[n+o]=e[t+o]},swapArrayPart:function(e,n,t,r){var o;for(o=0;r>o;++o){var i=e[n+o];e[n+o]=e[t+o],e[t+o]=i}},getLocations:function(n,t){var r,o={};for(r=0;r<t.length;++r){var i=t[r],a=-1;if(0===i.indexOf("a_")){if(a=e.getAttribLocation(n,i),-1===a)throw"Program doesn't have required attribute: "+i;o[i.slice(2)]=a}else{if(0!==i.indexOf("u_"))throw"Couldn't figure out your intent. All uniforms should start with 'u_' prefix, and attributes with 'a_'";if(a=e.getUniformLocation(n,i),null===a)throw"Program doesn't have required uniform: "+i;o[i.slice(2)]=a}}return o},context:e}}n.exports=t},{}],55:[function(e,n){function t(e){var n,t,o=Math.sqrt(e||1024)<<0,i=o,a=1,s={},u=0,f=[],c=[],d=function(e){return 0===(e&e-1)},l=function(){var e=new r(o*i);f.push(e)},p=function(n){var t=n/e<<0,r=n%e,i=r/o<<0,a=r%o;return{textureNumber:t,row:i,col:a}},v=function(){t.isDirty=!0,u=0,n=null},h=function(){n&&(window.clearTimeout(n),u+=1,n=null),u>10?v():n=window.setTimeout(v,400)},g=function(e,n){var t=f[e.textureNumber].canvas,r=f[n.textureNumber].ctx,o=n.col*i,a=n.row*i;r.drawImage(t,e.col*i,e.row*i,i,i,o,a,i,i),f[e.textureNumber].isDirty=!0,f[n.textureNumber].isDirty=!0},m=function(e,n,t){var r=p(e),o={offset:e};r.textureNumber>=f.length&&l();var a=f[r.textureNumber];a.ctx.drawImage(n,r.col*i,r.row*i,i,i),c[e]=n.src,s[n.src]=o,a.isDirty=!0,t(o)};if(!d(e))throw"Tiles per texture should be power of two.";return t={isDirty:!1,clearDirty:function(){var e;for(this.isDirty=!1,e=0;e<f.length;++e)f[e].isDirty=!1},remove:function(e){var n=s[e];if(!n)return!1;if(delete s[e],a-=1,a===n.offset)return!0;var t=p(n.offset),r=p(a);g(r,t);var o=s[c[a]];return o.offset=n.offset,c[n.offset]=c[a],h(),!0},getTextures:function(){return f},getCoordinates:function(e){return s[e]},load:function(e,n){if(s.hasOwnProperty(e))n(s[e]);else{var t=new window.Image,r=a;a+=1,t.crossOrigin="anonymous",t.onload=function(){h(),m(r,t,n)},t.src=e}}}}var r=e("./texture.js");n.exports=t},{"./texture.js":53}],56:[function(e,n){function t(e,n){return{_texture:0,_offset:0,size:"number"==typeof e?e:32,src:n}}n.exports=t},{}],57:[function(e,n){function t(){var e,n,t,i,a,s,u,f,c,d,l=18,p=["precision mediump float;","varying vec4 color;","varying vec3 vTextureCoord;","uniform sampler2D u_sampler0;","uniform sampler2D u_sampler1;","uniform sampler2D u_sampler2;","uniform sampler2D u_sampler3;","void main(void) {","   if (vTextureCoord.z == 0.) {","     gl_FragColor = texture2D(u_sampler0, vTextureCoord.xy);","   } else if (vTextureCoord.z == 1.) {","     gl_FragColor = texture2D(u_sampler1, vTextureCoord.xy);","   } else if (vTextureCoord.z == 2.) {","     gl_FragColor = texture2D(u_sampler2, vTextureCoord.xy);","   } else if (vTextureCoord.z == 3.) {","     gl_FragColor = texture2D(u_sampler3, vTextureCoord.xy);","   } else { gl_FragColor = vec4(0, 1, 0, 1); }","}"].join("\n"),v=["attribute vec2 a_vertexPos;","attribute float a_customAttributes;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","uniform float u_tilesPerTexture;","varying vec3 vTextureCoord;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0, 1);","float corner = mod(a_customAttributes, 4.);","float tileIndex = mod(floor(a_customAttributes / 4.), u_tilesPerTexture);","float tilesPerRow = sqrt(u_tilesPerTexture);","float tileSize = 1./tilesPerRow;","float tileColumn = mod(tileIndex, tilesPerRow);","float tileRow = floor(tileIndex/tilesPerRow);","if(corner == 0.0) {","  vTextureCoord.xy = vec2(0, 1);","} else if(corner == 1.0) {","  vTextureCoord.xy = vec2(1, 1);","} else if(corner == 2.0) {","  vTextureCoord.xy = vec2(0, 0);","} else {","  vTextureCoord.xy = vec2(1, 0);","}","vTextureCoord *= tileSize;","vTextureCoord.x += tileColumn * tileSize;","vTextureCoord.y += tileRow * tileSize;","vTextureCoord.z = floor(floor(a_customAttributes / 4.)/u_tilesPerTexture);","}"].join("\n"),h=1024,g=0,m=new Float32Array(64),y=function(e,n){e.nativeObject&&t.deleteTexture(e.nativeObject);var r=t.createTexture();t.activeTexture(t["TEXTURE"+n]),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.canvas),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D),t.uniform1i(s["sampler"+n],n),e.nativeObject=r},x=function(){if(e.isDirty){var n,t=e.getTextures();for(n=0;n<t.length;++n)(t[n].isDirty||!t[n].nativeObject)&&y(t[n],n);e.clearDirty()}};return{load:function(u){t=u,a=o(u),e=new r(h),n=a.createProgram(v,p),t.useProgram(n),s=a.getLocations(n,["a_vertexPos","a_customAttributes","u_screenSize","u_transform","u_sampler0","u_sampler1","u_sampler2","u_sampler3","u_tilesPerTexture"]),t.uniform1f(s.tilesPerTexture,h),t.enableVertexAttribArray(s.vertexPos),t.enableVertexAttribArray(s.customAttributes),i=t.createBuffer()},position:function(e,n){var t=e.id*l;m[t]=n.x-e.size,m[t+1]=n.y-e.size,m[t+2]=4*e._offset,m[t+3]=n.x+e.size,m[t+4]=n.y-e.size,m[t+5]=4*e._offset+1,m[t+6]=n.x-e.size,m[t+7]=n.y+e.size,m[t+8]=4*e._offset+2,m[t+9]=n.x-e.size,m[t+10]=n.y+e.size,m[t+11]=4*e._offset+2,m[t+12]=n.x+e.size,m[t+13]=n.y-e.size,m[t+14]=4*e._offset+1,m[t+15]=n.x+e.size,m[t+16]=n.y+e.size,m[t+17]=4*e._offset+3},createNode:function(n){m=a.extendArray(m,g,l),g+=1;var t=e.getCoordinates(n.src);t?n._offset=t.offset:(n._offset=0,e.load(n.src,function(e){n._offset=e.offset}))},removeNode:function(n){g>0&&(g-=1),n.id<g&&g>0&&(n.src&&e.remove(n.src),a.copyArrayPart(m,n.id*l,g*l,l))},replaceProperties:function(e,n){n._offset=e._offset},updateTransform:function(e){d=!0,c=e},updateSize:function(e,n){u=e,f=n,d=!0},render:function(){t.useProgram(n),t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,m,t.DYNAMIC_DRAW),d&&(d=!1,t.uniformMatrix4fv(s.transform,!1,c),t.uniform2f(s.screenSize,u,f)),t.vertexAttribPointer(s.vertexPos,2,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),t.vertexAttribPointer(s.customAttributes,1,t.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,8),x(),t.drawArrays(t.TRIANGLES,0,6*g)}}}var r=e("./webglAtlas.js"),o=e("./webgl.js");n.exports=t},{"./webgl.js":54,"./webglAtlas.js":55}],58:[function(e,n){function t(e){if(e.webglInputEvents)return e.webglInputEvents;var n,t,o=function(e,n,t){if(e&&e.size){var r=e.position,o=e.size;return r.x-o<n&&n<r.x+o&&r.y-o<t&&t<r.y+o}return!0},i=function(n){return e.getNodeAtClientPos(n,o)},a=null,s=[],u=[],f=[],c=[],d=[],l=[],p=[],v=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},h=function(e){return v(e),!1},g=function(e,n){var t,r;for(t=0;t<e.length;t+=1)if(r=e[t].apply(void 0,n))return!0},m=function(e){var o={x:0,y:0},m=null,y=1,x=+new Date,w=function(e){g(d,[m,e]),o.x=e.clientX,o.y=e.clientY},b=function(){r.off("mousemove",w),r.off("mouseup",b)},E=function(){t=e.getBoundingClientRect()};window.addEventListener("resize",E),E(),e.addEventListener("mousemove",function(e){if(!a){y++%7===0&&(E(),y=1);var n,r=!1;o.x=e.clientX-t.left,o.y=e.clientY-t.top,n=i(o),n&&m!==n?(m=n,r=r||g(s,[m])):null===n&&m!==n&&(r=r||g(u,[m]),m=null),r&&v(e)}}),e.addEventListener("mousedown",function(e){var a,s=!1;E(),o.x=e.clientX-t.left,o.y=e.clientY-t.top,a=[i(o),e],a[0]?(s=g(f,a),r.on("mousemove",w),r.on("mouseup",b),n=window.document.onselectstart,window.document.onselectstart=h,m=a[0]):m=null,s&&v(e)}),e.addEventListener("mouseup",function(e){var r,a=+new Date;o.x=e.clientX-t.left,o.y=e.clientY-t.top,r=[i(o),e],r[0]&&(window.document.onselectstart=n,400>a-x&&r[0]===m?g(p,r):g(l,r),x=a,g(c,r)&&v(e))})};return e.getGraphicsRoot(m),e.webglInputEvents={mouseEnter:function(e){return"function"==typeof e&&s.push(e),this},mouseLeave:function(e){return"function"==typeof e&&u.push(e),this},mouseDown:function(e){return"function"==typeof e&&f.push(e),this},mouseUp:function(e){return"function"==typeof e&&c.push(e),this},mouseMove:function(e){return"function"==typeof e&&d.push(e),this},click:function(e){return"function"==typeof e&&l.push(e),this},dblClick:function(e){return"function"==typeof e&&p.push(e),this},mouseCapture:function(e){a=e},releaseMouseCapture:function(){a=null}},e.webglInputEvents}var r=e("../Utils/documentEvents.js");n.exports=t},{"../Utils/documentEvents.js":41}],59:[function(e,n){function t(e){return{color:r(e)}}var r=e("./parseColor.js");n.exports=t},{"./parseColor.js":52}],60:[function(e,n){function t(){var e,n,t,o,i,a,s,u,f,c,d=6,l=2*(2*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT),p=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),v=["attribute vec2 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos/u_screenSize, 0.0, 1.0);","   color = a_color.abgr;","}"].join("\n"),h=0,g=new ArrayBuffer(16*l),m=new Float32Array(g),y=new Uint32Array(g),x=function(){if((h+1)*l>g.byteLength){var e=new ArrayBuffer(2*g.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(y),m=n,y=t,g=e}};return{load:function(a){n=a,o=r(a),e=o.createProgram(v,p),n.useProgram(e),i=o.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),n.enableVertexAttribArray(i.vertexPos),n.enableVertexAttribArray(i.color),t=n.createBuffer()},position:function(e,n,t){var r=e.id,o=r*d;m[o]=n.x,m[o+1]=n.y,y[o+2]=e.color,m[o+3]=t.x,m[o+4]=t.y,y[o+5]=e.color},createLink:function(e){x(),h+=1,a=e.id},removeLink:function(e){h>0&&(h-=1),e.id<h&&h>0&&o.copyArrayPart(y,e.id*d,h*d,d)},updateTransform:function(e){c=!0,f=e},updateSize:function(e,n){s=e,u=n,c=!0},render:function(){n.useProgram(e),n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,g,n.DYNAMIC_DRAW),c&&(c=!1,n.uniformMatrix4fv(i.transform,!1,f),n.uniform2f(i.screenSize,s,u)),n.vertexAttribPointer(i.vertexPos,2,n.FLOAT,!1,3*Float32Array.BYTES_PER_ELEMENT,0),n.vertexAttribPointer(i.color,4,n.UNSIGNED_BYTE,!0,3*Float32Array.BYTES_PER_ELEMENT,8),n.drawArrays(n.LINES,0,2*h),a=h-1},bringToFront:function(e){a>e.id&&o.swapArrayPart(m,e.id*d,a*d,d),a>0&&(a-=1)},getFrontLinkId:function(){return a}}}var r=e("./webgl.js");n.exports=t},{"./webgl.js":54}],61:[function(e,n){function t(){var e,n,t,o,i,a,s,u,f,c=4,d=3*Float32Array.BYTES_PER_ELEMENT+Uint32Array.BYTES_PER_ELEMENT,l=["precision mediump float;","varying vec4 color;","void main(void) {","   gl_FragColor = color;","}"].join("\n"),p=["attribute vec3 a_vertexPos;","attribute vec4 a_color;","uniform vec2 u_screenSize;","uniform mat4 u_transform;","varying vec4 color;","void main(void) {","   gl_Position = u_transform * vec4(a_vertexPos.xy/u_screenSize, 0, 1);","   gl_PointSize = a_vertexPos.z * u_transform[0][0];","   color = a_color.abgr;","}"].join("\n"),v=new ArrayBuffer(16*d),h=new Float32Array(v),g=new Uint32Array(v),m=0,y=function(){if((m+1)*d>=v.byteLength){var e=new ArrayBuffer(2*v.byteLength),n=new Float32Array(e),t=new Uint32Array(e);t.set(g),h=n,g=t,v=e}};return{load:function(a){n=a,i=r(a),e=i.createProgram(p,l),n.useProgram(e),o=i.getLocations(e,["a_vertexPos","a_color","u_screenSize","u_transform"]),n.enableVertexAttribArray(o.vertexPos),n.enableVertexAttribArray(o.color),t=n.createBuffer()},position:function(e,n){var t=e.id;h[t*c]=n.x,h[t*c+1]=n.y,h[t*c+2]=e.size,g[t*c+3]=e.color},updateTransform:function(e){f=!0,u=e},updateSize:function(e,n){a=e,s=n,f=!0},removeNode:function(e){m>0&&(m-=1),e.id<m&&m>0&&i.copyArrayPart(g,e.id*c,m*c,c)},createNode:function(){y(),m+=1},replaceProperties:function(){},render:function(){n.useProgram(e),n.bindBuffer(n.ARRAY_BUFFER,t),n.bufferData(n.ARRAY_BUFFER,v,n.DYNAMIC_DRAW),f&&(f=!1,n.uniformMatrix4fv(o.transform,!1,u),n.uniform2f(o.screenSize,a,s)),n.vertexAttribPointer(o.vertexPos,3,n.FLOAT,!1,c*Float32Array.BYTES_PER_ELEMENT,0),n.vertexAttribPointer(o.color,4,n.UNSIGNED_BYTE,!0,c*Float32Array.BYTES_PER_ELEMENT,12),n.drawArrays(n.POINTS,0,m)}}}var r=e("./webgl.js");n.exports=t},{"./webgl.js":54}],62:[function(e,n){function t(e,n){return{size:"number"==typeof e?e:10,color:r(n)}}var r=e("./parseColor.js");n.exports=t},{"./parseColor.js":52}],63:[function(e,n){n.exports="0.7.2"},{}]},{},[1])(1)});